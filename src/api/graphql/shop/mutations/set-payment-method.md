---
outline: false
examples:
  - id: set-payment-method
    title: Set Payment Method
    description: Set the payment method for a cart.
    query: |
      mutation setPaymentMethod($input: SetPaymentMethodInput!) {
        setPaymentMethod(input: $input) {
          cart {
            id
            paymentMethod
            paymentMethodTitle
          }
          message
          success
        }
      }
    variables: |
      {
        "input": {
          "cartId": "cart-123",
          "paymentMethodCode": "paypal"
        }
      }
    response: |
      {
        "data": {
          "setPaymentMethod": {
            "cart": {
              "id": "cart-123",
              "paymentMethod": "paypal",
              "paymentMethodTitle": "PayPal"
            },
            "message": "Payment method set successfully",
            "success": true
          }
        }
      }
---

# Set Payment Method

Set the payment method for a cart.

## Authentication


 This query requires a valid customer authentication token in the `Authorization` header. Use the [Customer Login API](/api/graphql/shop/mutations/customer-login) to retrieve the token. If the customer is a guest, use the guest cart token generated by the [Create Guest Cart](/api/graphql/shop/mutations/create-guest-cart) mutation.


```
Authorization: Bearer <accessToken>
```

## Arguments

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `cartId` | String | ✅ Yes | Cart ID |
| `paymentMethodCode` | String | ✅ Yes | Payment method code (e.g., paypal, stripe) |

## Response

| Field | Type | Description |
|-------|------|-------------|
| `cart` | Cart | Updated cart with payment method |
| `message` | String | Success or error message |
| `success` | Boolean | Success status |

## Common Payment Method Codes

| Code | Description |
|------|-------------|
| `paypal` | PayPal |
| `stripe` | Stripe |
| `bank_transfer` | Bank Transfer |
| `cash_on_delivery` | Cash on Delivery (COD) |
| `credit_card` | Credit Card |

## Prerequisites

- Billing address must be set
- Shipping method must be selected
- Payment method must be enabled in store

## Validation Rules

- Payment method code must be valid and enabled
- Payment method must be available for the customer's country
- Cart must have items
- All previous checkout steps must be completed

## Error Responses

```json
{
  "errors": {
    "cartId": ["Cart not found."],
    "paymentMethodCode": ["Invalid or unavailable payment method."],
    "billingAddress": ["Billing address must be set first."],
    "shippingMethod": ["Shipping method must be set first."]
  }
}
```

## Related Documentation

- [Get Payment Methods](/api/graphql/shop/queries/get-payment-methods)
- [Set Billing Address](/api/graphql/shop/mutations/set-billing-address)
- [Place Order](/api/graphql/shop/mutations/place-order)
